{% extends 'base.html' %}

{% block content %}
  <h1>Editar Item do Pedido</h1>
  
  <h2>Pedido #{{ pedido.id }}</h2>
  <p>Cliente: {{ pedido.cliente.nome }}</p>
  <p>Data: {{ pedido.criado_em }}</p>
  
  <form method="post" novalidate>
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit" class="btn btn-primary">Salvar</button>
    <a href="{% url 'detalhes_pedido' pedido.id %}" class="btn btn-secondary">Cancelar</a>
  </form>

  {% if item_pedido %}
    <h3>Detalhes do Item</h3>
    <p>Produto: {{ item_pedido.produto.nome }}</p>
    <p>Quantidade: {{ item_pedido.qtde }}</p>
    <p>Pre√ßo: R$ {{ item_pedido.preco }}</p>
    <p>Total: R$ {{ item_pedido.qtde|floatformat:2 }} x R$ {{ item_pedido.preco|floatformat:2 }} = R$ {{ item_pedido.total|floatformat:2 }}</p>
  {% endif %}

  {% if messages %}
    <ul class="messages">
      {% for message in messages %}
        <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
      {% endfor %}
    </ul>
  {% endif %}
{% endblock %}
